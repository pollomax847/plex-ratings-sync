# Configuration d'exemple pour crontab
# Pour installer : crontab -e puis copier les lignes désirées

# ============================================
# SYNCHRONISATION AUTOMATIQUE PLEX RATINGS
# ============================================

# SYNCHRONISATION QUOTIDIENNE (recommandé)
# Supprimer automatiquement les fichiers 1⭐ et synchroniser les ratings 3-5⭐ vers ID3
# Tous les soirs à 22h (quand vous dormez probablement)
0 22 * * * /home/paulceline/bin/audio/plex_daily_ratings_sync.sh >> /home/paulceline/logs/plex_ratings/daily.log 2>&1

# WORKFLOW MENSUEL COMPLET (analyses + rapports + maintenance lourde)
# Fin de mois à 2h du matin (dernier jour du mois)
0 2 28-31 * * [ "$(date -d tomorrow +\%d)" -eq 1 ] && /home/paulceline/bin/audio/plex_monthly_workflow.sh >> /home/paulceline/logs/plex_monthly/monthly.log 2>&1

# ============================================
# MAINTENANCE COMPLÉMENTAIRE
# ============================================

# Optionnel: Nettoyer les fichiers corrompus après la sync Plex (dimanche 4h)
0 4 * * 0 cd /home/paulceline/bin/audio && python3 nettoyer_musique_simple.py --delete --dir /mnt/mybook/Musiques

# Optionnel: Maintenance mensuelle Beets (1er du mois à 5h)
0 5 1 * * /home/paulceline/bin/audio/beets_monthly_maintenance.sh

# Optionnel: Organisation Lidarr après nettoyage (dimanche 6h)
0 6 * * 0 /home/paulceline/bin/audio/lidarr-organize.sh --source /mnt/mybook/Musiques --dest /mnt/mybook/Musiques_Organized

# ============================================
# MAINTENANCE COMPLÉMENTAIRE
# ============================================

# Optionnel: Nettoyer les fichiers corrompus après la sync Plex (dimanche 4h)
0 4 * * 0 cd /home/paulceline/bin/audio && python3 nettoyer_musique_simple.py --delete --dir /mnt/mybook/Musiques

# Optionnel: Maintenance mensuelle Beets (1er du mois à 5h)
0 5 1 * * /home/paulceline/bin/audio/beets_monthly_maintenance.sh

# Optionnel: Organisation Lidarr après nettoyage (dimanche 6h)
0 6 * * 0 /home/paulceline/bin/audio/lidarr-organize.sh --source /mnt/mybook/Musiques --dest /mnt/mybook/Musiques_Organized

# ============================================
# SURVEILLANCE ET NOTIFICATIONS
# ============================================

# Optionnel: Vérification de l'espace disque (tous les jours à minuit)
0 0 * * * df -h /mnt/mybook | grep -E 'Use%|mybook' | mail -s "Espace disque MyBook" votre@email.com

# Optionnel: Rapport mensuel automatique (sera généré par plex_monthly_workflow.sh)
# Les rapports sont automatiquement créés dans /home/paulceline/bin/audio/monthly_report_*.json

# Optionnel: Vérification des doublons (tous les trimestres, 1er jour des mois 1,4,7,10)
0 7 1 1,4,7,10 * /home/paulceline/bin/audio/duplicate_detector.py | mail -s "Rapport doublons Plex" votre@email.com

# ============================================
# EXEMPLES D'INSTALLATION
# ============================================

# Pour installer une de ces tâches :
# 1. Ouvrir l'éditeur cron : crontab -e
# 2. Copier la ligne désirée (sans le #)
# 3. Modifier les chemins si nécessaire
# 4. Sauvegarder et quitter

# Pour voir les tâches actuelles : crontab -l
# Pour supprimer toutes les tâches : crontab -r

# ============================================
# NOTES IMPORTANTES
# ============================================

# - Assurez-vous que les chemins sont corrects
# - Testez d'abord le script manuellement
# - Configurez les emails si vous voulez des notifications
# - Les logs sont dans /home/paulceline/logs/
# - Créez le répertoire de logs : mkdir -p /home/paulceline/logs

# ============================================
# VARIABLE D'ENVIRONNEMENT
# ============================================

# Si nécessaire, définir le PATH au début du crontab :
# PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
# SHELL=/bin/bash

# ============================================
# EXEMPLE COMPLET POUR DÉBUTANT
# ============================================

# Ligne complète pour supprimer les 1 étoile tous les dimanches :
# 0 3 * * 0 cd /home/paulceline/bin/audio && ./plex_ratings_auto_sync.sh

# Pour installer cette ligne :
# 1. Tapez : crontab -e
# 2. Ajoutez la ligne (sans le # initial)
# 3. Sauvegardez avec Ctrl+X puis Y
# 4. Le système confirmera l'installation