# Configuration cron pour le nettoyage automatique des ratings 2 étoiles
# À installer avec : crontab -e

# ============================================
# NETTOYAGE AUTOMATIQUE APRÈS SONGREC
# ============================================

# Exécuter le nettoyage automatique TOUTES LES HEURES (pour traitement rapide)
# Cela va:
# - Vérifier les queues SongRec complétées
# - Enlever automatiquement les ratings 2 étoiles
0 * * * * /home/paulceline/bin/audio/cleanup/auto_cleanup_2_stars.sh >> /home/paulceline/logs/plex_ratings/auto_cleanup.log 2>&1

# Alternative: Chaque jour à 03:00 (moins fréquent)
# 0 3 * * * /home/paulceline/bin/audio/cleanup/auto_cleanup_2_stars.sh >> /home/paulceline/logs/plex_ratings/auto_cleanup.log 2>&1

# Alternative: Chaque 6 heures (compromis)
# 0 */6 * * * /home/paulceline/bin/audio/cleanup/auto_cleanup_2_stars.sh >> /home/paulceline/logs/plex_ratings/auto_cleanup.log 2>&1

# ============================================
# EXPLICATIONS DES PARAMÈTRES
# ============================================

# 0      = minute 0 (à l'heure pile)
# *      = chaque heure (00:00, 01:00, 02:00, ... 23:00)
# *      = tous les jours
# *      = tous les mois
# *      = tous les jours de la semaine

# ============================================
# WORKFLOW COMPLET AUTOMATISÉ
# ============================================

# Ordre d'exécution recommandé:
# 
# 20:00 (20h)    → Plex Ratings Sync (détecte les 2 étoiles)
# 20:40 (20h40)  → SongRec Queue créée et traitement lancé
# ~21:30 (21h30) → SongRec traitement complété
# 22:00 (22h)    → Nettoyage automatique (enlève ratings 2 étoiles) ← CETTE CRON
# 23:00 (23h)    → Nettoyage automatique (si d'autres queues)
# 00:00 (minuit) → Nettoyage automatique
# ...chaque heure
#
# Résultat: Processus complètement automatisé avec vérifications horaires!

# ============================================
# EXEMPLE D'INSTALLATION COMPLÈTE
# ============================================

# Pour installer UNIQUEMENT le nettoyage automatique (toutes les heures) :
# 1. crontab -e
# 2. Copier cette ligne :
#    0 * * * * /home/paulceline/bin/audio/cleanup/auto_cleanup_2_stars.sh >> /home/paulceline/logs/plex_ratings/auto_cleanup.log 2>&1
# 3. Sauvegarder (Ctrl+X puis Y)

# ============================================
# COMMANDES UTILES
# ============================================

# Voir les logs de nettoyage:
# tail -f /home/paulceline/logs/plex_ratings/auto_cleanup.log

# Tester le script manuellement:
# /home/paulceline/bin/audio/cleanup/auto_cleanup_2_stars.sh

# Voir les queues SongRec:
# ls -lh ~/songrec_queue/

# ============================================
# NOTES IMPORTANTES
# ============================================

# 1. Le script vérifie que SongRec a complété le traitement
# 2. Le script ne supprime PAS les fichiers, juste les ratings
# 3. Les queues traitées sont marquées avec un fichier .processed
# 4. Chaque execution est loggée pour suivi
